<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메인 페이지</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/header.css">
    <script src="../js/food_script.js"></script>
    <script src="../js/background.js"></script>
</head>
<body>
    <header>
        <div id="moon"></div>
        <div id="info">
            <span id="account_cir"><img src="../img/eva_person-outline.png"></span>
            <span id="stu_id">0학년 0반 김00</span>
        </div>
        <div id="me">
            <a href="timetable.html" class="menu">
                <div>
                    <img src="../img/School.png" class="menu_img">
                    <span class="menu_text">시간표</span>
                </div>   
            </a>  
            <a href="" class="menu"> 
                <div>
                    <img src="../img/Board.png" class="menu_img">
                    <span class="menu_text">게시판</span>
                </div> 
            </a>
            <a href="../html/notice_writing.html" class="menu">   
                <div>  
                    <img src="../img/Board.png" class="menu_img">
                    <span class="menu_text">글작성</span>
                </div> 
            </a>
            <a href="index.html" class="menu">
                <div>
                    <img src="../img/Rice.png" id="menu_img">
                    <span class="menu_text">급식표</span>
                </div>
            </a>    
        </div>
        <div id="date">
            <div class="choice-date">
                <input type="date" id="dateInput" >
                <script>
                    date = new Date();
                    document.getElementById('dateInput').valueAsDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
                </script>
            </div>
            <div class="input-date">
                <button type="button">
                    <img src="../img/Find.png" onclick="toInfo()" class="button-img">
                    <script>
                        function toInfo() {
                            getMealInfo(document.getElementById("dateInput").value.toString().replace(/-/g, ''));
                        }
                    </script>
                </button>
            </div>
        </div>
        <a href="" id="mypage_icon">
            <div id="mypage_img">
                <img src="../img/eva_person-outline.png">
            </div>
        </a>
    </header>
    <hr>
    <aside>
        <div class="button-container">
            <a href="#yesterday" class="button" onclick="MealDays(-1)">어제</a>
            <a href="#today" class="button" onclick="MealDays(0)">오늘</a>
            <a href="#tomorrow" class="button" onclick="MealDays(1)">내일</a>
            <script>
                var button = document.getElementsByClassName("button");
                function handleClick(event) {

                if (event.target.classList[1] === "clicked") {
                    event.target.classList.remove("clicked");
                } 
                else {
                    for (var i = 0; i < button.length; i++) {
                        button[i].classList.remove("clicked");
                        button[i].classList.add("non_clicked")
                    }

                    event.target.classList.remove("non_clicked");
                    event.target.classList.add("clicked");
                    }
                }

                function init() {
                    for (var i = 0; i < button.length; i++) {
                        button[i].addEventListener("click", handleClick);
                    }
                }
                init();
            </script>
        </div>
    </aside>
    
    <main>
        <div class="school-meals-container">
            <div class="school-meals">
                <p class="meals_head">조식</p>
                <ul id="breakfastMenu"></ul>
            </div>
            <div class="school-meals">
                <p class="meals_head">석식</p>
                <ul id="lunchMenu"></ul>
            </div>
            <div class="school-meals">
                <p class="meals_head">중식</p>
                <ul id="dinnerMenu"></ul>
            </div>
        </div>
    </main>

    <div id="rec">
        <div id="blue_box">
            <span id="date2"></span>
            <div id="time_box">
                <span id="ampm"></span>
                <span id="time"></span>  
            </div>
        </div>

        <script>
            function current_time(){
                const noww = new Date();
                const hours = noww.getHours();
                const minutes = String(noww.getMinutes()).padStart(2, "0"); //0을 붙여서 두 자릿수 유지

                document.getElementById("date2").innerText = `${noww.getFullYear()}.${noww.getMonth() + 1}.${noww.getDate()}`;
                document.getElementById("ampm").innerText = hours >= 12 ? "오후" : "오전";
                document.getElementById("time").innerText = `${String(hours % 12 || 12).padStart(2, "0")}:${minutes}`;
            }
            // 1초마다 업데이트
            setInterval(current_time, 1000);
            current_time();
        </script>

        <div id="beige_box">
            <a href="">
                <div id="class_table">
                    <div><img src="../img/School.png"></div>
                    <div><span>
                        우리반 <br>
                        시간표 보기
                    </span></div>
                </div>
            </a>

            <a href="">
                <div id="board">
                    <div><img src="../img/Board.png"></div>
                    <div><span>
                        우리학교 도움 <br>
                        요청 게시판 보기
                    </span></div>
                </div>
            </a>
        </div>
    </div>
</main>
<hr>
<footer>
    <img src="../img/logo.png" id="footer_img">
    <div id="footer_text">
        <p><a href="">작성자저작권정보</a> | <a href="https://www.instagram.com/js_mirim/">JS인스타공개</a> | <a href="">학교정보공개</a></p>
        <div>
            <p>서울시  관악구 호람로 546 (신림동)  미림마이스터고등학교  JS 스터디 커뮤니티 센터</p>
            <p>JS 부장   s2455@e-mirim.hs.kr | JS 부부장   s2455@e-mirim.hs.kr | 디자인팀  김설애 | 개발팀  김민재 / 곽자경 / 윤시웅 / 이서영</p>
            <p>546 Hoam-ro, Gwanak-gu, Seoul, 08821 Korea | MIRIM MEISTER SCHOOL  JS STUDY</p>
        </div>
    </div>
</footer>

<script>
    function MealDays(day) {
        now = new Date();
        // console.log(day);
        if (day === 1) {
            var tomorrow = new Date(now.setDate(now.getDate() + 1));
            year = tomorrow.getFullYear();
            month = tomorrow.getMonth()+1;
            date = tomorrow.getDate();
        }

        else if (day === -1) {
            var tomorrow = new Date(now.setDate(now.getDate() - 1));
            year = tomorrow.getFullYear();
            month = tomorrow.getMonth()+1;
            date = tomorrow.getDate();
        }

        else {
            var tomorrow = new Date(now.setDate(now.getDate()));
            year = tomorrow.getFullYear();
            month = tomorrow.getMonth()+1;
            date = tomorrow.getDate();
        }
        getMealInfo(`${year}${month >= 10 ? month : '0' + month}${date >= 10 ? date : '0' + date}`);
    }

    
    background(); // 페이지 로드 시 실행
</script>
</body>
</html>